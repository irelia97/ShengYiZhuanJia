{"version":3,"sources":["./src/app/routes/forgot-password/forgot-password.page.html","./src/app/routes/forgot-password/forgot-password.module.ts","./src/app/routes/forgot-password/forgot-password.page.scss","./src/app/routes/forgot-password/forgot-password.page.ts"],"names":[],"mappings":"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","file":"routes-forgot-password-forgot-password-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n      <ion-buttons slot=\\\"start\\\">\\r\\n        <ion-back-button text=\\\"Back\\\"></ion-back-button>\\r\\n      </ion-buttons>\\r\\n      <ion-title>找回密码</ion-title>\\r\\n    </ion-toolbar>\\r\\n    <ion-toolbar>\\r\\n      1. 输入邮箱或手机号> 2. 输入验证码>3. 重置密码\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  \\r\\n  <ion-content padding>\\r\\n    <ion-slides  #forgotPasswordSlides>\\r\\n      <ion-slide>\\r\\n          <form (ngSubmit)=\\\"onSendPhone()\\\" #forgotPasswordForm=\\\"ngForm\\\" novalidate>\\r\\n            <ion-list>\\r\\n              <ion-item>\\r\\n                <ion-label position=\\\"fixed\\\">邮箱/手机号</ion-label>\\r\\n                <ion-input name=\\\"forgotPhone\\\" type=\\\"text\\\" required [(ngModel)]=\\\"user.forgotPhone\\\"></ion-input>\\r\\n              </ion-item>\\r\\n              <div padding-horizontal>\\r\\n                <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"forgotPasswordForm.invalid\\\">提交</ion-button>\\r\\n              </div>\\r\\n            </ion-list>\\r\\n          </form>\\r\\n      </ion-slide>\\r\\n      <ion-slide>\\r\\n        <form (ngSubmit)=\\\"onSendCode()\\\" #codeForm=\\\"ngForm\\\" novalidate>\\r\\n          <ion-list>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"fixed\\\">验证码</ion-label>\\r\\n              <ion-input name=\\\"code\\\" type=\\\"text\\\" required [(ngModel)]=\\\"user.code\\\"></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-text text-left color=\\\"danger\\\" *ngIf=\\\"codeForm.submitted\\\">\\r\\n              <p [hidden]=\\\"codeIsRight\\\" padding-start>您的验证码有误!</p>\\r\\n            </ion-text>\\r\\n            <div padding-horizontal>\\r\\n              <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"codeForm.invalid\\\">提交</ion-button>\\r\\n            </div>\\r\\n          </ion-list>\\r\\n        </form>\\r\\n      </ion-slide>\\r\\n      <ion-slide>\\r\\n        <form (ngSubmit)=\\\"onSendPwd()\\\" #pwdForm=\\\"ngForm\\\" novalidate>\\r\\n          <ion-list>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"fixed\\\">新密码</ion-label>\\r\\n              <ion-input name=\\\"pwd\\\" type=\\\"password\\\" required [(ngModel)]=\\\"user.pwd\\\"></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"fixed\\\">确认密码</ion-label>\\r\\n              <ion-input name=\\\"cpwd\\\" type=\\\"password\\\" required [(ngModel)]=\\\"user.cpwd\\\"></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-text text-left color=\\\"danger\\\" *ngIf=\\\"pwdForm.submitted\\\">\\r\\n              <p [hidden]=\\\"pwdIsSame\\\" padding-start>两次密码不相同</p>\\r\\n            </ion-text>\\r\\n            <div padding-horizontal>\\r\\n              <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"pwdForm.invalid\\\">提交</ion-button>\\r\\n            </div>\\r\\n          </ion-list>\\r\\n        </form>\\r\\n      </ion-slide>\\r\\n    </ion-slides>\\r\\n  </ion-content>\\r\\n  \"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ForgotPasswordPage } from './forgot-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ForgotPasswordPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ForgotPasswordPage]\n})\nexport class ForgotPasswordPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JvdXRlcy9mb3Jnb3QtcGFzc3dvcmQvZm9yZ290LXBhc3N3b3JkLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthentiactionCodeService } from 'src/app/shared/services/authentiaction-code.service';\r\nimport { UserService } from 'src/app/shared/services/user-service.service';\r\nimport { ToastController, MenuController, AlertController, IonSlides } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-forgot-password',\r\n  templateUrl: './forgot-password.page.html',\r\n  styleUrls: ['./forgot-password.page.scss'],\r\n})\r\nexport class ForgotPasswordPage implements OnInit {\r\n    @ViewChild('forgotPasswordSlides', {static: false}) forgotPasswordSlides: IonSlides;\r\n    user = {\r\n      forgotPhone: '',\r\n      code: '',\r\n      pwd: '',\r\n      cpwd: ''\r\n    };\r\n    scode = \"0\";\r\n\r\n    codeIsRight = true;\r\n    pwdIsSame = true;\r\n    constructor(private authenticationCodeService: AuthentiactionCodeService, private router: Router,\r\n                private userService: UserService, private toastController: ToastController,\r\n                private alertController: AlertController, private menuController: MenuController,\r\n                public alertCtrl : AlertController) { }\r\n    ngOnInit() {\r\n        //this.forgotPasswordSlides.lockSwipeToNext(true);\r\n    }\r\n    ionViewDidEnter() {\r\n        this.menuController.enable(false);\r\n    }\r\n    ionViewDidLeave() {\r\n        this.menuController.enable(true)\r\n    }\r\n    next() {\r\n        this.forgotPasswordSlides.lockSwipeToNext(false);\r\n        this.forgotPasswordSlides.slideNext();\r\n        this.forgotPasswordSlides.lockSwipeToNext(true);\r\n    }\r\n    previous() {\r\n        this.forgotPasswordSlides.lockSwipeToNext(false);\r\n        this.forgotPasswordSlides.slidePrev();\r\n        this.forgotPasswordSlides.lockSwipeToNext(true);\r\n    }\r\n    async onSendPhone() {\r\n      if (this.userService.check(this.user.forgotPhone)) {\r\n          this.scode = this.authenticationCodeService.createCode(4);\r\n          let alert = await this.alertCtrl.create({\r\n            header : '验证码',\r\n            message: '您的验证码是' + this.scode,\r\n            buttons: ['确认']\r\n        });\r\n        alert.present();\r\n          this.next();\r\n      } else {\r\n          let toast = await this.toastController.create({\r\n              message: '不存在这个手机用户！',\r\n              duration: 3000\r\n          });\r\n          toast.present();\r\n      }\r\n    }\r\n    onSendCode() {\r\n      if (this.scode == this.user.code) {\r\n        this.next();\r\n      } else {\r\n        // 验证码错误\r\n        this.codeIsRight = false;\r\n      }\r\n    }\r\n    async onSendPwd() {\r\n      if (this.user.pwd === this.user.cpwd) {\r\n          // 注册成功，保存数据\r\n          if (this.userService.update(this.user.forgotPhone, this.user.pwd)) {\r\n              let alert =await this.alertController.create({\r\n                  header: '提示',\r\n                  message: '密码修改成功！',\r\n                  buttons: ['确认']\r\n              });\r\n              alert.present();\r\n              this.router.navigateByUrl('login');\r\n          }\r\n      } else {\r\n          this.pwdIsSame = false;\r\n      }\r\n    }\r\n}\r\n"],"sourceRoot":"webpack:///"}