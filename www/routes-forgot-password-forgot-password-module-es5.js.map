{"version":3,"sources":["src/app/routes/forgot-password/forgot-password.page.html","src/app/routes/forgot-password/forgot-password.module.ts","src/app/routes/forgot-password/forgot-password.page.scss","src/app/routes/forgot-password/forgot-password.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n      <ion-buttons slot=\\\"start\\\">\\r\\n        <ion-back-button text=\\\"Back\\\"></ion-back-button>\\r\\n      </ion-buttons>\\r\\n      <ion-title>找回密码</ion-title>\\r\\n    </ion-toolbar>\\r\\n    <ion-toolbar>\\r\\n      1. 输入邮箱或手机号> 2. 输入验证码>3. 重置密码\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  \\r\\n  <ion-content padding>\\r\\n    <ion-slides  #forgotPasswordSlides>\\r\\n      <ion-slide>\\r\\n          <form (ngSubmit)=\\\"onSendPhone()\\\" #forgotPasswordForm=\\\"ngForm\\\" novalidate>\\r\\n            <ion-list>\\r\\n              <ion-item>\\r\\n                <ion-label position=\\\"fixed\\\">邮箱/手机号</ion-label>\\r\\n                <ion-input name=\\\"forgotPhone\\\" type=\\\"text\\\" required [(ngModel)]=\\\"user.forgotPhone\\\"></ion-input>\\r\\n              </ion-item>\\r\\n              <div padding-horizontal>\\r\\n                <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"forgotPasswordForm.invalid\\\">提交</ion-button>\\r\\n              </div>\\r\\n            </ion-list>\\r\\n          </form>\\r\\n      </ion-slide>\\r\\n      <ion-slide>\\r\\n        <form (ngSubmit)=\\\"onSendCode()\\\" #codeForm=\\\"ngForm\\\" novalidate>\\r\\n          <ion-list>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"fixed\\\">验证码</ion-label>\\r\\n              <ion-input name=\\\"code\\\" type=\\\"text\\\" required [(ngModel)]=\\\"user.code\\\"></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-text text-left color=\\\"danger\\\" *ngIf=\\\"codeForm.submitted\\\">\\r\\n              <p [hidden]=\\\"codeIsRight\\\" padding-start>您的验证码有误!</p>\\r\\n            </ion-text>\\r\\n            <div padding-horizontal>\\r\\n              <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"codeForm.invalid\\\">提交</ion-button>\\r\\n            </div>\\r\\n          </ion-list>\\r\\n        </form>\\r\\n      </ion-slide>\\r\\n      <ion-slide>\\r\\n        <form (ngSubmit)=\\\"onSendPwd()\\\" #pwdForm=\\\"ngForm\\\" novalidate>\\r\\n          <ion-list>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"fixed\\\">新密码</ion-label>\\r\\n              <ion-input name=\\\"pwd\\\" type=\\\"password\\\" required [(ngModel)]=\\\"user.pwd\\\"></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"fixed\\\">确认密码</ion-label>\\r\\n              <ion-input name=\\\"cpwd\\\" type=\\\"password\\\" required [(ngModel)]=\\\"user.cpwd\\\"></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-text text-left color=\\\"danger\\\" *ngIf=\\\"pwdForm.submitted\\\">\\r\\n              <p [hidden]=\\\"pwdIsSame\\\" padding-start>两次密码不相同</p>\\r\\n            </ion-text>\\r\\n            <div padding-horizontal>\\r\\n              <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"pwdForm.invalid\\\">提交</ion-button>\\r\\n            </div>\\r\\n          </ion-list>\\r\\n        </form>\\r\\n      </ion-slide>\\r\\n    </ion-slides>\\r\\n  </ion-content>\\r\\n  \"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ForgotPasswordPage } from './forgot-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ForgotPasswordPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ForgotPasswordPage]\n})\nexport class ForgotPasswordPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JvdXRlcy9mb3Jnb3QtcGFzc3dvcmQvZm9yZ290LXBhc3N3b3JkLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthentiactionCodeService } from 'src/app/shared/services/authentiaction-code.service';\r\nimport { UserService } from 'src/app/shared/services/user-service.service';\r\nimport { ToastController, MenuController, AlertController, IonSlides } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-forgot-password',\r\n  templateUrl: './forgot-password.page.html',\r\n  styleUrls: ['./forgot-password.page.scss'],\r\n})\r\nexport class ForgotPasswordPage implements OnInit {\r\n    @ViewChild('forgotPasswordSlides', {static: false}) forgotPasswordSlides: IonSlides;\r\n    user = {\r\n      forgotPhone: '',\r\n      code: '',\r\n      pwd: '',\r\n      cpwd: ''\r\n    };\r\n    scode = \"0\";\r\n\r\n    codeIsRight = true;\r\n    pwdIsSame = true;\r\n    constructor(private authenticationCodeService: AuthentiactionCodeService, private router: Router,\r\n                private userService: UserService, private toastController: ToastController,\r\n                private alertController: AlertController, private menuController: MenuController,\r\n                public alertCtrl : AlertController) { }\r\n    ngOnInit() {\r\n        //this.forgotPasswordSlides.lockSwipeToNext(true);\r\n    }\r\n    ionViewDidEnter() {\r\n        this.menuController.enable(false);\r\n    }\r\n    ionViewDidLeave() {\r\n        this.menuController.enable(true)\r\n    }\r\n    next() {\r\n        this.forgotPasswordSlides.lockSwipeToNext(false);\r\n        this.forgotPasswordSlides.slideNext();\r\n        this.forgotPasswordSlides.lockSwipeToNext(true);\r\n    }\r\n    previous() {\r\n        this.forgotPasswordSlides.lockSwipeToNext(false);\r\n        this.forgotPasswordSlides.slidePrev();\r\n        this.forgotPasswordSlides.lockSwipeToNext(true);\r\n    }\r\n    async onSendPhone() {\r\n      if (this.userService.check(this.user.forgotPhone)) {\r\n          this.scode = this.authenticationCodeService.createCode(4);\r\n          let alert = await this.alertCtrl.create({\r\n            header : '验证码',\r\n            message: '您的验证码是' + this.scode,\r\n            buttons: ['确认']\r\n        });\r\n        alert.present();\r\n          this.next();\r\n      } else {\r\n          let toast = await this.toastController.create({\r\n              message: '不存在这个手机用户！',\r\n              duration: 3000\r\n          });\r\n          toast.present();\r\n      }\r\n    }\r\n    onSendCode() {\r\n      if (this.scode == this.user.code) {\r\n        this.next();\r\n      } else {\r\n        // 验证码错误\r\n        this.codeIsRight = false;\r\n      }\r\n    }\r\n    async onSendPwd() {\r\n      if (this.user.pwd === this.user.cpwd) {\r\n          // 注册成功，保存数据\r\n          if (this.userService.update(this.user.forgotPhone, this.user.pwd)) {\r\n              let alert =await this.alertController.create({\r\n                  header: '提示',\r\n                  message: '密码修改成功！',\r\n                  buttons: ['确认']\r\n              });\r\n              alert.present();\r\n              this.router.navigateByUrl('login');\r\n          }\r\n      } else {\r\n          this.pwdIsSame = false;\r\n      }\r\n    }\r\n}\r\n"],"sourceRoot":"webpack:///","file":"routes-forgot-password-forgot-password-module-es5.js"}